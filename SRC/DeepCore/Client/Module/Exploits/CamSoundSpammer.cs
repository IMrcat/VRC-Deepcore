using System;
using System.Collections;
using DeepCore.Client.Misc;
using MelonLoader;
using ReMod.Core.VRChat;
using UnityEngine;
using VRC.UserCamera;

namespace DeepCore.Client.Module.Exploits
{
	// Token: 0x0200005B RID: 91
	internal class CamSoundSpammer
	{
		// Token: 0x060001E5 RID: 485 RVA: 0x0000D34E File Offset: 0x0000B54E
		public static void State(bool s)
		{
			if (s)
			{
				MelonCoroutines.Start(CamSoundSpammer.CameraSounds(PlayerExtensions.GetVRCPlayer()));
				return;
			}
			CamSoundSpammer.bool_6 = false;
		}

		// Token: 0x060001E6 RID: 486 RVA: 0x0000D36A File Offset: 0x0000B56A
		public static IEnumerator CameraSounds(VRCPlayer player)
		{
			if (!CamSoundSpammer.bool_6 && player != null)
			{
				CamSoundSpammer.bool_6 = true;
				while (CamSoundSpammer.bool_6)
				{
					UserCameraIndicator field_Internal_UserCameraIndicator_ = MonoBehaviourPublicObTrObVRGaObVRleSiObUnique.field_Public_Static_MonoBehaviourPublicObTrObVRGaObVRleSiObUnique_0.field_Internal_UserCameraIndicator_0;
					if (field_Internal_UserCameraIndicator_ != null)
					{
						field_Internal_UserCameraIndicator_.transform.position = player.transform.position;
						PhotonUtil.SendRPC(14, "", false, -1, field_Internal_UserCameraIndicator_.gameObject, null, "PhotoCapture", 0f, 0, null, 4, 0f);
					}
					yield return new WaitForSeconds(0.3f);
				}
				CamSoundSpammer.bool_6 = false;
			}
			yield break;
		}

		// Token: 0x04000107 RID: 263
		public static bool bool_6;
	}
}
