using System;
using System.Collections;
using DeepCore.Client.Module.WorldHacks;
using MelonLoader;
using VRC;
using VRC.SDK3.Components;

namespace DeepCore.Client.Module.Exploits
{
	// Token: 0x0200005A RID: 90
	internal class BeyBladePickup
	{
		// Token: 0x060001E2 RID: 482 RVA: 0x0000D317 File Offset: 0x0000B517
		public static void State(bool s)
		{
			if (s)
			{
				BeyBladePickup.isPickupSpinning = true;
				MelonCoroutines.Start(BeyBladePickup.BeyBladePickups());
				return;
			}
			BeyBladePickup.isPickupSpinning = false;
			MelonCoroutines.Stop(BeyBladePickup.BeyBladePickups());
		}

		// Token: 0x060001E3 RID: 483 RVA: 0x0000D33E File Offset: 0x0000B53E
		public static IEnumerator BeyBladePickups()
		{
			while (BeyBladePickup.isPickupSpinning)
			{
				if (!BeyBladePickup.isPickupSpinning || !Player.Method_Internal_Static_get_Player_0())
				{
					BeyBladePickup.isPickupSpinning = false;
					yield break;
				}
				foreach (VRCPickup vrcpickup in OnLoadedScaneManager.sdk3Items)
				{
					PickupUtils.TakeOwnerShipPickup(vrcpickup);
					vrcpickup.transform.Rotate(90f, 0f, 0f);
				}
				yield return null;
			}
			yield break;
		}

		// Token: 0x04000106 RID: 262
		public static bool isPickupSpinning;
	}
}
