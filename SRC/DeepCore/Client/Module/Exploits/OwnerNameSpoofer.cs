using System;
using DeepCore.Client.Misc;
using VRC.SDKBase;

namespace DeepCore.Client.Module.Exploits
{
	// Token: 0x0200006D RID: 109
	internal class OwnerNameSpoofer
	{
		// Token: 0x06000228 RID: 552 RVA: 0x0000EA3D File Offset: 0x0000CC3D
		public static void State(bool s)
		{
			if (s)
			{
				PopupHelper.PopupCall("OwnerSpoofer", "Enter an username", "Set", false, delegate(string userInput)
				{
					OwnerNameSpoofer.CustomName = userInput;
					OwnerNameSpoofer.Enabled = true;
				});
				return;
			}
			OwnerNameSpoofer.Enabled = false;
		}

		// Token: 0x06000229 RID: 553 RVA: 0x0000EA80 File Offset: 0x0000CC80
		public static void QuickSpoof()
		{
			if (OwnerNameSpoofer.Enabled)
			{
				VRCPlayer.field_Internal_Static_VRCPlayer_0 == null;
				if (string.IsNullOrEmpty(OwnerNameSpoofer.CustomName))
				{
					DeepConsole.LogConsole("QuickSpoof", "Error: CustomName is null or empty.");
				}
				string displayName = Networking.LocalPlayer.displayName;
				string customName = OwnerNameSpoofer.CustomName;
				VRCPlayer.field_Internal_Static_VRCPlayer_0.field_Private_VRCPlayerApi_0.displayName = customName;
				DeepConsole.Log("OwnerSpoof", "Spoofed as: " + displayName + " | CustomName: " + customName);
				if (VRCPlayer.field_Internal_Static_VRCPlayer_0.field_Private_VRCPlayerApi_0.displayName == customName)
				{
					DeepConsole.Log("QuickSpoof", "Spoofing successful!");
					return;
				}
				DeepConsole.Log("QuickSpoof", "Spoofing failed. DisplayName mismatch.");
			}
		}

		// Token: 0x0600022A RID: 554 RVA: 0x0000EB30 File Offset: 0x0000CD30
		public static void Update()
		{
			if (OwnerNameSpoofer.Enabled && PlayerUtil.GetLocalVRCPlayer().field_Private_VRCPlayerApi_0 != null)
			{
				PlayerUtil.GetLocalVRCPlayer().field_Private_VRCPlayerApi_0.displayName = OwnerNameSpoofer.CustomName;
				DeepConsole.Log("OwnerSpoof", "Spoofed as :" + PlayerUtil.GetLocalVRCPlayer().field_Private_VRCPlayerApi_0.displayName + " | CustomName:" + OwnerNameSpoofer.CustomName);
				VrcExtensions.Toast("OwnerSpoof", "Spoofed as :" + PlayerUtil.GetLocalVRCPlayer().field_Private_VRCPlayerApi_0.displayName + " | CustomNAme:" + OwnerNameSpoofer.CustomName, null, 5f);
				OwnerNameSpoofer.Enabled = false;
			}
		}

		// Token: 0x04000130 RID: 304
		public static string CustomName = "";

		// Token: 0x04000131 RID: 305
		public static bool Enabled = false;
	}
}
